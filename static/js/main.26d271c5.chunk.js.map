{"version":3,"sources":["Videos.js","App.js","serviceWorker.js","index.js"],"names":["Videos","Card","className","CardContent","style","height","Typography","color","gutterBottom","href","this","props","source","target","dict","src","url","frameBorder","allow","allowFullScreen","Component","_","require","getSuggestionValue","suggestion","word","renderSuggestion","getSectionSuggestions","section","words","App","state","suggestions","videos","value","dicts","groupedWords","selected","getSuggestions","escapedValue","trim","replace","regex","RegExp","length","groupBy","car","setState","filtered","Object","keys","filter","key","test","reduce","obj","sort","map","onChange","event","newValue","method","onSuggestionsFetchRequested","onSuggestionsClearRequested","onSuggestionSelected","axios","get","then","response","data","dictionaries","forEach","file","resp","push","title","split","wordInfo","variants","inputProps","placeholder","autoFocus","renderVideos","v","variant","start","video","Math","floor","ceil","end","endsWith","Boolean","window","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.26d271c5.chunk.js","sourcesContent":["import React, {Component} from 'react';\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Card from \"@material-ui/core/Card\";\n\nclass Videos extends Component {\n    render() {\n\n        return (\n            <Card className={\"video-card\"}>\n                <CardContent style={{height: \"90%\"}}>\n                    <Typography color=\"textSecondary\" gutterBottom>\n                        Источник видео: <a href={this.props.source} target=\"_blank\">{this.props.dict}</a>\n                    </Typography>\n                    <iframe className=\"video\"\n                            src={this.props.url}\n                            frameBorder=\"0\"\n                            allow=\"accelerometer; encrypted-media; gyroscope; picture-in-picture\"\n                            allowFullScreen>\n                    </iframe>\n                </CardContent>\n\n\n            </Card>\n\n        );\n    }\n}\n\nexport default Videos;","import React, {Component} from 'react';\nimport Videos from './Videos';\nimport axios from 'axios';\n\nimport Autosuggest from 'react-autosuggest';\n\nlet _ = require('lodash');\n\nfunction escapeRegexCharacters(str) {\n    return str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n}\n\nfunction getSuggestionValue(suggestion) {\n    return suggestion.word;\n}\n\nfunction renderSuggestion(suggestion) {\n    return (\n        <span>{suggestion.word}</span>\n    );\n}\n\nfunction getSectionSuggestions(section) {\n    return section.words;\n}\n\n\nclass App extends Component {\n    state = {\n        suggestions: [],\n        videos: null,\n        value: '',\n        dicts: [],\n        words: [],\n        groupedWords: [],\n        selected: false,\n    };\n\n    componentDidMount() {\n        var dicts = [];\n        var words = [];\n\n        axios.get('manifest.json')\n            .then((response) => {\n                const dict_names = response.data.dictionaries;\n                dict_names.forEach(file => {\n                    axios.get(`dictionaries/${file}`)\n                        .then(resp => {\n                            dicts.push({title: `${file}`.split('.json')[0], words: resp.data});\n                            resp.data.forEach(wordInfo => {\n                                words.push({\n                                    title: `${file}`.split('.json')[0],\n                                    word: wordInfo.word, variants: wordInfo.variants\n                                })\n                            });\n                        })\n                })\n            });\n\n        this.setState({\n            dicts: dicts,\n            words: words,\n        });\n    }\n\n    getSuggestions = (value) => {\n        const escapedValue = escapeRegexCharacters(value.trim());\n\n        if (escapedValue === '') {\n            return [];\n        }\n\n        const regex = new RegExp('^' + escapedValue, 'i');\n\n        let groupedWords;\n        if (!this.state.groupedWords.length) {\n            groupedWords = _.groupBy(this.state.words, car => car.word);\n            this.setState({groupedWords: groupedWords});\n        }\n        else groupedWords = this.state.groupedWords;\n\n        const filtered = Object.keys(groupedWords)\n            .filter(key => regex.test(key))\n            .reduce((obj, key) => {\n                obj[key] = groupedWords[key];\n                return obj;\n            }, {});\n\n        return Object.keys(filtered).sort().map(key => {\n            return {word: key}\n        });\n    };\n\n    onChange = (event, {newValue, method}) => {\n        this.setState({\n            value: newValue,\n        });\n    };\n\n    onSuggestionsFetchRequested = ({value}) => {\n        this.setState({\n            suggestions: this.getSuggestions(value),\n            selected: false,\n        });\n    };\n\n    onSuggestionsClearRequested = () => {\n        this.setState({\n            suggestions: [],\n        });\n    };\n\n    onSuggestionSelected = (event, {suggestion}) => {\n        this.setState({\n            selected: true,\n        });\n    };\n\n    get renderVideos() {\n        let wordInfo = [];\n        let videos = [];\n\n        if (this.state.selected && this.state.value.length > 0) {\n            this.state.groupedWords[this.state.value].forEach(dict => {\n                wordInfo.push({variants: dict.variants, dict: dict.title})\n            });\n\n            if (wordInfo) {\n                for (let v of wordInfo) {\n                    for (let variant of v.variants) {\n                        let url;\n                        if (variant.start)\n                            url = `https://www.youtube.com/embed/${variant.video.split('v=')[1]}?start=${Math.floor(variant.start)}&end=${Math.ceil(variant.end)}&rel=0&loop=1&controls=0&showinfo=0`;\n                        else if (!variant.video.endsWith(\".mp4\") && !variant.video.endsWith(\".webm\")) url = `https://www.youtube.com/embed/${variant.video.split('v=')[1]}`;\n                        else url = variant.video;\n\n                        videos.push(<Videos url={url} dict={v.dict} source={variant.source}/>);\n                    }\n                }\n            }\n        }\n\n        return videos;\n    };\n\n    render() {\n        const inputProps = {\n            placeholder: \"Введите слово\",\n            value: this.state.value,\n            onChange: this.onChange,\n            autoFocus: true,\n        };\n\n        return (\n            <div>\n                <div>\n                    <h1>Поиск по словарям РЖЯ</h1>\n                    <a href=\"https://vk.com/public189313853\">Группа в ВК</a>\n                </div>\n                <div className={\"search-field\"}>\n                    <Autosuggest\n                        suggestions={this.state.suggestions}\n                        onSuggestionsFetchRequested={this.onSuggestionsFetchRequested}\n                        onSuggestionsClearRequested={this.onSuggestionsClearRequested}\n                        getSuggestionValue={getSuggestionValue}\n                        renderSuggestion={renderSuggestion}\n                        onSuggestionSelected={this.onSuggestionSelected}\n                        getSectionSuggestions={getSectionSuggestions}\n                        inputProps={inputProps}/>\n                </div>\n                <div className=\"videos-grid\">\n                    {this.renderVideos}\n                </div>\n\n            </div>\n        );\n\n    }\n}\n\nexport default App;\n\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}